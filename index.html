<!DOCTYPE html>
<html lang="fa" dir="ltr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title data-translate="page-title">leen | IP Scanner</title>

  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">

  <!-- Vazirmatn Font (Persian) -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@100..900&display=swap" rel="stylesheet">

  <!-- Custom Styles -->
  <style>
    :root {
      --clr-gold: #C7A46C;
      --clr-dark: #1E1E1EFF;
      --gradient-bg: linear-gradient(135deg, #1E1E1EFF 0%, #121212 100%);
    }
    body {
      font-family: 'Vazirmatn', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--gradient-bg);
      color: #f5f5f5;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }
    .navbar {
      background: rgba(30,30,30,.85) !important;
      backdrop-filter: blur(8px);
      border-bottom: 1px solid rgba(199,164,108,.25);
    }
    .btn-primary {
      background: var(--clr-gold);
      border: none;
      font-weight: 600;
      transition: transform .2s;
    }
    .btn-primary:hover {
      transform: translateY(-2px);
      background: #b8965a;
    }
    .btn-secondary {
      background: rgba(199,164,108,.15);
      border: 1px solid var(--clr-gold);
      color: var(--clr-gold);
    }
    .btn-secondary:hover {
      background: rgba(199,164,108,.25);
      color: #fff;
    }
    .form-control, .form-select {
      background: rgba(255,255,255,.08);
      border: 1px solid rgba(255,255,255,.15);
      color: #fff;
    }
    .form-control:focus, .form-select:focus {
      background: rgba(255,255,255,.12);
      border-color: var(--clr-gold);
      box-shadow: 0 0 0 .2rem rgba(199,164,108,.35);
    }
    .table-dark {
      --bs-table-bg: rgba(30,30,30,.7);
      --bs-table-border-color: rgba(255,255,255,.1);
    }
    .progress {
      height: 6px;
    }
    .progress-bar {
      background: var(--clr-gold);
    }
    footer {
      margin-top: auto;
      text-align: center;
      font-size: .8rem;
      color: rgba(255,255,255,.55);
      padding: 2rem 0 1rem;
    }
    footer a {
      color: var(--clr-gold);
      text-decoration: none;
    }
    .lang-switch {
      cursor: pointer;
      padding: .25rem .5rem;
      border-radius: .25rem;
      transition: background .2s;
    }
    .lang-switch:hover {
      background: rgba(255,255,255,.1);
    }
    .lang-switch.active {
      background: var(--clr-gold);
      color: #000;
      font-weight: 600;
    }
    .advanced-toggle {
      cursor: pointer;
      user-select: none;
      font-weight: 600;
      color: var(--clr-gold);
    }
    .advanced-body {
      max-height: 500px;
      overflow: hidden;
      transition: max-height .4s ease;
    }
    .advanced-body.collapsed {
      max-height: 0;
    }
  </style>

  <meta name="keywords" content="cloudflare, ip scanner, free internet, v2ray, xray">
  <meta name="robots" content="index,follow">
  <meta http-equiv="Content-Security-Policy" content="upgrade-insecure-requests">
  <link rel="icon" type="image/x-icon" href="assets/favicon.ico">
</head>
<body data-bs-theme="dark">

<nav class="navbar navbar-dark sticky-top">
  <div class="container-fluid justify-content-between align-items-center">
    <div class="d-flex gap-2">
      <span class="lang-switch active" onclick="changeLanguage('fa')">فا</span>
      <span class="lang-switch" onclick="changeLanguage('en')">EN</span>
      <span class="lang-switch" onclick="changeLanguage('de')">DE</span>
      <span class="lang-switch" onclick="changeLanguage('fr')">FR</span>
      <span class="lang-switch" onclick="changeLanguage('es')">ES</span>
      <span class="lang-switch" onclick="changeLanguage('tr')">TR</span>
      <span class="lang-switch" onclick="changeLanguage('ru')">RU</span>
      <span class="lang-switch" onclick="changeLanguage('zh')">中文</span>
    </div>
    <h5 class="mb-0" data-translate="header-text">اینترنت برای همه یا هیچکس</h5>
    <div></div>
  </div>
</nav>

<main class="container py-4 flex-grow-1">
  <div class="row justify-content-center">
    <div class="col-12 col-md-10 col-lg-8">

      <div class="alert alert-primary d-flex align-items-center" id="defAlert"></div>

      <div class="row g-3 mb-3">
        <div class="col-md-6">
          <label class="form-label" data-translate="ip-count"></label>
          <input class="form-control" type="number" id="max-ip" min="1" max="5000" value="20">
        </div>
        <div class="col-md-6">
          <label class="form-label" data-translate="max-latency"></label>
          <input type="number" class="form-control" id="max-latency" min="50" max="3000" step="50" value="400">
        </div>
      </div>

      <div class="mb-3">
        <div class="advanced-toggle d-flex align-items-center gap-2" onclick="toggleAdvanced()">
          <span>⚙️</span>
          <span data-translate="advanced">Advanced</span>
          <span id="adv-icon">▼</span>
        </div>
        <div id="advanced-body" class="advanced-body">
          <div class="row g-3 pt-3">
            <div class="col-md-6">
              <label class="form-label" data-translate="include-range"></label>
              <input class="form-control" type="text" id="ip-include" placeholder="1.1.1.1/24,8.8.8.8/24">
            </div>
            <div class="col-md-6">
              <label class="form-label" data-translate="exclude-range"></label>
              <input type="text" class="form-control" id="ip-exclude" placeholder="1, 88.25, 41,55">
            </div>
          </div>
          <div class="row g-3 pt-3">
            <div class="col-12">
              <label class="form-label" data-translate="expressions"></label>
              <input class="form-control" type="text" id="ip-regex" placeholder="^88\.172\.|^101\.">
            </div>
          </div>
        </div>
      </div>

      <div class="alert alert-danger d-flex align-items-center" data-translate="dangAlert"></div>

      <div class="d-grid gap-2">
        <button class="btn btn-primary" id="btn-start" onclick="startScan()" disabled></button>
        <button class="btn btn-danger" id="btn-cancel" onclick="cancelScan()" disabled></button>
      </div>

      <div id="TableForm" class="none mt-4">
        <div class="row my-2 border-bottom border-dark py-3">
          <div id="test-no"></div>
          <div class="col col-xs-6 col-lg-3 py-1" id="ip-no"></div>
          <div class="col col-xs-1 col-lg-1 py-1" id="ip-try"></div>
          <div class="col col-xs-3 col-lg-2 py-1" id="ip-latency"></div>
        </div>

        <div class="table-responsive">
          <table class="table table-dark table-striped align-middle">
            <thead>
              <tr>
                <th width="35">#</th>
                <th data-translate="ip"></th>
                <th data-translate="latency"></th>
                <th width="70">
                  <div class="btn-group" role="group">
                    <button class="btn btn-secondary btn-sm" onclick="downloadAsCSV()">
                      <img height="20" src="assets/img/icon-csv.png" alt="CSV">
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="downloadAsJSON()">
                      <img height="20" src="assets/img/icon-json.png" alt="JSON">
                    </button>
                    <button class="btn btn-secondary btn-sm" onclick="copyAllToClipboard()">
                      <img height="20" src="assets/img/icon-copy.png" alt="Copy">
                    </button>
                  </div>
                </th>
              </tr>
            </thead>
            <tbody id="result"></tbody>
          </table>
        </div>
      </div>

    </div>
  </div>
</main>

<footer>
  <p>© NajiDevs - 2025 All rights reserved. No part of this website may be reproduced, distributed, or transmitted in any form or by any means without the prior written permission of the owner.</p>
  <a class="btn btn-sm btn-outline-light mt-2" href="https://github.com/naajidevs">NaajiDevs</a>
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL"
        crossorigin="anonymous"></script>
<script src="./assets/js/jquery.min.js"></script>
<script src="./assets/js/script.js"></script>
<script>
  const translations = {
    de: {
      "page-title": "leen | IP Scanner",
      "header-text": "Freies Internet ist ein Menschenrecht | Frauen Leben Freiheit",
      "defAlert": "Mit dem IP-Scanner-Tool können Sie nach sauberen Cloudflare-IPs suchen!",
      "ip-count": "Anzahl der IPs",
      "max-latency": "Maximale Latenz",
      "include-range": "Bereiche zum Einbeziehen (z. B.: 1.1.1.1/24,8.8.8.8/24)",
      "exclude-range": "Bereiche zum Ausschließen (z. B.: 1, 88.25, 41,55)",
      "expressions": "Regulärer Ausdruck (z. B.: ^88\\.172\\.|^101\\.)",
      "dangAlert": "Bevor Sie beginnen, schalten Sie Ihr VPN aus!",
      "start": "Starten",
      "stop": "Stoppen",
      "done": "IP-Suche abgeschlossen!",
      "canceled": "IP-Suche abgebrochen!",
      "ip": "IP",
      latency: "Latenz",
      advanced: "Erweitert"
    },
    en: {
      "page-title": "leen | IP Scanner",
      "header-text": "Free internet is a human right | Women Life Freedom",
      "defAlert": "With IP Scanner tool, you can search for clean Cloudflare IPs!",
      "ip-count": "Number of IPs",
      "max-latency": "Maximum Latency",
      "include-range": "Ranges to include (eg: 1.1.1.1/24,8.8.8.8/24)",
      "exclude-range": "Ranges to exclude (eg: 1, 88.25, 41,55)",
      "expressions": "Regular expression (eg: ^88\\.172\\.|^101\\.)",
      "dangAlert": "Before you start, turn off your VPN!",
      "start": "Start",
      "stop": "Stop",
      "done": "Searching IP finished!",
      "canceled": "Searching IP canceled!",
      "ip": "IP",
      latency: "Latency",
      advanced: "Advanced"
    },
    fa: {
      "page-title": "leen | اسکن IP",
      "header-text": "اینترنت برای همه یا هیچکس",
      "defAlert": "با ابزار اسکن IP می‌توانید برای IP‌های تمیز Cloudflare جستجو کنید!",
      "ip-count": "تعداد IP‌ها",
      "max-latency": "حداکثر تاخیر",
      "include-range": "محدوده‌های قابل تضمین (مثلاً 1.1.1.1/24، 8.8.8.8/24)",
      "exclude-range": "محدوده‌های مستثنی (مثلاً 1, 88.25, 41,55)",
      "expressions": "عبارت منظم (مثلاً ^88\\.172\\.|^101\\.)",
      "dangAlert": "قبل از شروع، VPN خود را خاموش کنید!",
      "start": "شروع",
      "stop": "توقف",
      "done": "جستجوی IP به اتمام رسید!",
      "canceled": "جستجوی IP لغو شد!",
      "ip": "IP",
      latency: "تاخیر",
      advanced: "پیشرفته"
    },
    fr: {
      "page-title": "leen | Scanner IP",
      "header-text": "Internet gratuit est un droit humain | Femmes Vie Liberté",
      "defAlert": "Avec l'outil de scanner IP, vous pouvez rechercher des IP propres à Cloudflare!",
      "ip-count": "Nombre d'IP",
      "max-latency": "Latence maximale",
      "include-range": "Plages à inclure (ex. : 1.1.1.1/24,8.8.8.8/24)",
      "exclude-range": "Plages à exclure (ex. : 1, 88.25, 41,55)",
      "expressions": "Expression régulière (ex. : ^88\\.172\\.|^101\\.)",
      "dangAlert": "Avant de commencer, désactivez votre VPN !",
      "start": "Démarrer",
      "stop": "Arrêter",
      "done": "Recherche IP terminée !",
      "canceled": "Recherche IP annulée !",
      "ip": "IP",
      latency: "Latence",
      advanced: "Avancé"
    },
    es: {
      "page-title": "leen | Escáner de IP",
      "header-text": "El internet libre es un derecho humano | Mujeres Vida Libertad",
      "defAlert": "Con la herramienta IP Scanner, ¡puedes buscar IPs limpias de Cloudflare!",
      "ip-count": "Número de IPs",
      "max-latency": "Latencia máxima",
      "include-range": "Rangos a incluir (p. ej.: 1.1.1.1/24,8.8.8.8/24)",
      "exclude-range": "Rangos a excluir (p. ej.: 1, 88.25, 41,55)",
      "expressions": "Expresión regular (p. ej.: ^88\\.172\\.|^101\\.)",
      "dangAlert": "¡Antes de comenzar, apaga tu VPN!",
      "start": "Comenzar",
      "stop": "Detener",
      "done": "¡Búsqueda de IP finalizada!",
      "canceled": "¡Búsqueda de IP cancelada!",
      "ip": "IP",
      latency: "Latencia",
      advanced: "Avanzado"
    },
    tr: {
      "page-title": "leen | IP Tarayıcı",
      "header-text": "Özgür internet bir insan hakkıdır | Kadınlar Hayat Özgürlük",
      "defAlert": "IP Tarayıcı aracı ile temiz Cloudflare IP'lerini arayabilirsiniz!",
      "ip-count": "IP Sayısı",
      "max-latency": "Maksimum Gecikme",
      "include-range": "Dahil edilecek aralıklar (örn.: 1.1.1.1/24,8.8.8.8/24)",
      "exclude-range": "Dışlanacak aralıklar (örn.: 1, 88.25, 41,55)",
      "expressions": "Düzenli ifade (örn.: ^88\\.172\\.|^101\\.)",
      "dangAlert": "Başlamadan önce VPN'inizi kapatın!",
      "start": "Başlat",
      "stop": "Durdur",
      "done": "IP arama tamamlandı!",
      "canceled": "IP arama iptal edildi!",
      "ip": "IP",
      latency: "Gecikme",
      advanced: "Gelişmiş"
    },
    ru: {
      "page-title": "leen | IP-сканер",
      "header-text": "Свободный интернет — это право человека | Женщины Жизнь Свобода",
      "defAlert": "С помощью инструмента IP Scanner вы можете искать чистые IP-адреса Cloudflare!",
      "ip-count": "Количество IP",
      "max-latency": "Максимальная задержка",
      "include-range": "Диапазоны для включения (например: 1.1.1.1/24,8.8.8.8/24)",
      "exclude-range": "Диапазоны для исключения (например: 1, 88.25, 41,55)",
      "expressions": "Регулярное выражение (например: ^88\\.172\\.|^101\\.)",
      "dangAlert": "Прежде чем начать, отключите VPN!",
      "start": "Начать",
      "stop": "Стоп",
      "done": "Поиск IP завершён!",
      "canceled": "Поиск IP отменён!",
      "ip": "IP",
      latency: "Задержка",
      advanced: "Расширенные"
    },
    zh: {
      "page-title": "leen | IP 扫描器",
      "header-text": "自由互联网是人权 | 女性 生活 自由",
      "defAlert": "使用 IP Scanner 工具，您可以搜索干净的 Cloudflare IP!",
      "ip-count": "IP 数量",
      "max-latency": "最大延迟",
      "include-range": "要包含的范围（例如：1.1.1.1/24,8.8.8.8/24）",
      "exclude-range": "要排除的范围（例如：1, 88.25, 41,55）",
      "expressions": "正则表达式（例如：^88\\.172\\.|^101\\.)",
      "dangAlert": "开始之前，请关闭您的 VPN！",
      "start": "开始",
      "stop": "停止",
      "done": "IP 搜索完成！",
      "canceled": "IP 搜索已取消！",
      "ip": "IP",
      latency: "延迟",
      advanced: "高级"
    }
  };

  function changeLanguage(lang) {
    document.documentElement.lang = lang;
    document.documentElement.dir = lang === 'fa' ? 'rtl' : 'ltr';
    document.querySelectorAll('[data-translate]').forEach(el => {
      const key = el.getAttribute('data-translate');
      if (translations[lang] && translations[lang][key]) el.textContent = translations[lang][key];
    });
    document.querySelectorAll('.lang-switch').forEach(sw => sw.classList.remove('active'));
    document.querySelector(`.lang-switch[onclick*="${lang}"]`).classList.add('active');
    localStorage.setItem('lang', lang);
  }

  function toggleAdvanced() {
    const body = document.getElementById('advanced-body');
    const icon = document.getElementById('adv-icon');
    body.classList.toggle('collapsed');
    icon.textContent = body.classList.contains('collapsed') ? '▶' : '▼';
  }

  // init
  (() => {
    const saved = localStorage.getItem('lang') || 'fa';
    changeLanguage(saved);
  })();
</script>
</body>
</html>
